# Maintainer: Trevor SANDY <trevor[dot]sandy[at]gmail[dot]com>
pkgname=lpub3d
pkgver={X.XX.XX.XXX}
pkgrel=1
pkgdesc="An LDraw Building Instruction Editor"
url="https://github.com/trevorsandy/lpub3d.git"
arch=('x86_64' 'i686')
license=('GPL3')
depends=('qt5-base' 'qt5-tools')
makedepends=()
conflicts=()
replaces=()
backup=()
source=("lpub3d.git.tar.gz")
md5sums=(SKIP)

prepare() {
  cd ${srcdir}/lpub3d
  
  # get ldraw archive libraries
  if [ -f ../complete.zip ] ; then                     \
       cp ../complete.zip mainApp/extras ;             \
  else
       echo "complete.zip not found!" ;                \
  fi ;
  if [ -f ../lpub3dldrawunf.zip ] ; then               \
       cp ../lpub3dldrawunf.zip mainApp/extras ;       \
  else
       echo "lpub3dldrawunf.zip not found!" ;          \
  fi ;

  # use Qt5
  export QT_SELECT=qt5
  if [ -x /usr/bin/qmake ] ; then                      \
      qmake -makefile CONFIG+=release CONFIG+=pkg ;    \
  elif [ -x /usr/bin/qmake-qt5 ] ; then                \
      qmake-qt5 -makefile CONFIG+=release CONFIG+=pkg ;\
  fi ;
}

build() {
  cd ${srcdir}/lpub3d
  make clean
  make
}
 
package() {
  cd ${srcdir}/lpub3d
  make INSTALL_ROOT=${pkgdir} install 
}
